<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Contributing to BioCro | BioCro Development</title>
  <meta name="description" content="1 Contributing to BioCro | BioCro Development" />
  <meta name="generator" content="bookdown 0.36 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Contributing to BioCro | BioCro Development" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Contributing to BioCro | BioCro Development" />
  
  
  



<meta name="date" content="2023-11-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="generating-documentation.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#note-about-the-types-of-documentation-in-biocro"><i class="fa fa-check"></i>Note about the types of documentation in BioCro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#version-info"><i class="fa fa-check"></i>Version Info</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="contributing-to-biocro.html"><a href="contributing-to-biocro.html"><i class="fa fa-check"></i><b>1</b> Contributing to BioCro</a>
<ul>
<li class="chapter" data-level="1.1" data-path="contributing-to-biocro.html"><a href="contributing-to-biocro.html#making-changes"><i class="fa fa-check"></i><b>1.1</b> Making Changes</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="contributing-to-biocro.html"><a href="contributing-to-biocro.html#discuss-first"><i class="fa fa-check"></i><b>1.1.1</b> Discuss first</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="contributing-to-biocro.html"><a href="contributing-to-biocro.html#code-style"><i class="fa fa-check"></i><b>1.2</b> Code style</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="contributing-to-biocro.html"><a href="contributing-to-biocro.html#scientific-considerations"><i class="fa fa-check"></i><b>1.2.1</b> Scientific considerations</a></li>
<li class="chapter" data-level="1.2.2" data-path="contributing-to-biocro.html"><a href="contributing-to-biocro.html#general-coding-considerations"><i class="fa fa-check"></i><b>1.2.2</b> General coding considerations</a></li>
<li class="chapter" data-level="1.2.3" data-path="contributing-to-biocro.html"><a href="contributing-to-biocro.html#formatting-code"><i class="fa fa-check"></i><b>1.2.3</b> Formatting code</a></li>
<li class="chapter" data-level="1.2.4" data-path="contributing-to-biocro.html"><a href="contributing-to-biocro.html#r-specific-coding-advice"><i class="fa fa-check"></i><b>1.2.4</b> R-specific coding advice</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="contributing-to-biocro.html"><a href="contributing-to-biocro.html#formatting-tools"><i class="fa fa-check"></i><b>1.3</b> Formatting Tools</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="contributing-to-biocro.html"><a href="contributing-to-biocro.html#clang"><i class="fa fa-check"></i><b>1.3.1</b> Clang</a></li>
<li class="chapter" data-level="1.3.2" data-path="contributing-to-biocro.html"><a href="contributing-to-biocro.html#editorconfig"><i class="fa fa-check"></i><b>1.3.2</b> EditorConfig</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="generating-documentation.html"><a href="generating-documentation.html"><i class="fa fa-check"></i><b>2</b> Generating Documentation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="generating-documentation.html"><a href="generating-documentation.html#documentation-for-the-cc-code."><i class="fa fa-check"></i><b>2.1</b> Documentation for the C/C++ code.</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="generating-documentation.html"><a href="generating-documentation.html#required-software"><i class="fa fa-check"></i><b>2.1.1</b> Required software</a></li>
<li class="chapter" data-level="2.1.2" data-path="generating-documentation.html"><a href="generating-documentation.html#installation-1"><i class="fa fa-check"></i><b>2.1.2</b> Installation</a></li>
<li class="chapter" data-level="2.1.3" data-path="generating-documentation.html"><a href="generating-documentation.html#generating-the-documentation"><i class="fa fa-check"></i><b>2.1.3</b> Generating the Documentation</a></li>
<li class="chapter" data-level="2.1.4" data-path="generating-documentation.html"><a href="generating-documentation.html#viewing-and-using-the-documentation"><i class="fa fa-check"></i><b>2.1.4</b> Viewing and using the documentation</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="generating-documentation.html"><a href="generating-documentation.html#building-package-vignettes"><i class="fa fa-check"></i><b>2.2</b> Building package vignettes</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="generating-documentation.html"><a href="generating-documentation.html#required-software-1"><i class="fa fa-check"></i><b>2.2.1</b> Required software</a></li>
<li class="chapter" data-level="2.2.2" data-path="generating-documentation.html"><a href="generating-documentation.html#build-procedure"><i class="fa fa-check"></i><b>2.2.2</b> Build procedure</a></li>
<li class="chapter" data-level="2.2.3" data-path="generating-documentation.html"><a href="generating-documentation.html#alternative-options"><i class="fa fa-check"></i><b>2.2.3</b> Alternative options</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="generating-documentation.html"><a href="generating-documentation.html#compiling-and-viewing-the-bookdown-book"><i class="fa fa-check"></i><b>2.3</b> Compiling and viewing the <em>bookdown</em> book</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="running-the-testthat-tests.html"><a href="running-the-testthat-tests.html"><i class="fa fa-check"></i><b>3</b> Running the <em>testthat</em> Tests</a>
<ul>
<li class="chapter" data-level="3.1" data-path="running-the-testthat-tests.html"><a href="running-the-testthat-tests.html#requirements"><i class="fa fa-check"></i><b>3.1</b> Requirements</a></li>
<li class="chapter" data-level="3.2" data-path="running-the-testthat-tests.html"><a href="running-the-testthat-tests.html#tldr"><i class="fa fa-check"></i><b>3.2</b> tl;dr</a></li>
<li class="chapter" data-level="3.3" data-path="running-the-testthat-tests.html"><a href="running-the-testthat-tests.html#sec:TLDR"><i class="fa fa-check"></i><b>3.3</b> tl;dr for devtools users</a></li>
<li class="chapter" data-level="3.4" data-path="running-the-testthat-tests.html"><a href="running-the-testthat-tests.html#continuous-integration-workflow-why-run-tests-manually"><i class="fa fa-check"></i><b>3.4</b> Continuous integration workflow; why run tests manually?</a></li>
<li class="chapter" data-level="3.5" data-path="running-the-testthat-tests.html"><a href="running-the-testthat-tests.html#test-running-scenarios"><i class="fa fa-check"></i><b>3.5</b> Test-running scenarios</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="running-the-testthat-tests.html"><a href="running-the-testthat-tests.html#sec:test-installed"><i class="fa fa-check"></i><b>3.5.1</b> Running the test suite on the installed version of BioCro</a></li>
<li class="chapter" data-level="3.5.2" data-path="running-the-testthat-tests.html"><a href="running-the-testthat-tests.html#sec:switching-reporters"><i class="fa fa-check"></i><b>3.5.2</b> Switching reporters</a></li>
<li class="chapter" data-level="3.5.3" data-path="running-the-testthat-tests.html"><a href="running-the-testthat-tests.html#sec:testing-local"><i class="fa fa-check"></i><b>3.5.3</b> Running the test suite against the BioCro source code</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="running-the-testthat-tests.html"><a href="running-the-testthat-tests.html#running-individual-test-files"><i class="fa fa-check"></i><b>3.6</b> Running individual test files</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="running-the-testthat-tests.html"><a href="running-the-testthat-tests.html#running-an-individual-test-file-on-the-installed-package"><i class="fa fa-check"></i><b>3.6.1</b> Running an individual test file on the installed package</a></li>
<li class="chapter" data-level="3.6.2" data-path="running-the-testthat-tests.html"><a href="running-the-testthat-tests.html#running-an-individual-test-file-against-the-package-source-code"><i class="fa fa-check"></i><b>3.6.2</b> Running an individual test file against the package source code</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="running-the-testthat-tests.html"><a href="running-the-testthat-tests.html#using_devtools"><i class="fa fa-check"></i><b>3.7</b> Using devtools</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="adding-the-boost-libraries.html"><a href="adding-the-boost-libraries.html"><i class="fa fa-check"></i><b>4</b> Adding the Boost libraries</a>
<ul>
<li class="chapter" data-level="4.1" data-path="adding-the-boost-libraries.html"><a href="adding-the-boost-libraries.html#why-this-is-needed"><i class="fa fa-check"></i><b>4.1</b> Why this is needed</a></li>
<li class="chapter" data-level="4.2" data-path="adding-the-boost-libraries.html"><a href="adding-the-boost-libraries.html#how-to-extract-parts-of-boost"><i class="fa fa-check"></i><b>4.2</b> How to extract parts of Boost</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="adding-the-boost-libraries.html"><a href="adding-the-boost-libraries.html#notes-for-using-bcp-in-windows"><i class="fa fa-check"></i><b>4.2.1</b> Notes for using bcp in Windows</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-update-documentation-workflow.html"><a href="the-update-documentation-workflow.html"><i class="fa fa-check"></i><b>5</b> The <em>Update Documentation</em> Workflow</a></li>
<li class="chapter" data-level="6" data-path="the-doxygen-docker-action-using-makefile-action.html"><a href="the-doxygen-docker-action-using-makefile-action.html"><i class="fa fa-check"></i><b>6</b> The <em>Doxygen Docker Action using Makefile</em> Action</a>
<ul>
<li class="chapter" data-level="6.1" data-path="the-doxygen-docker-action-using-makefile-action.html"><a href="the-doxygen-docker-action-using-makefile-action.html#inputs"><i class="fa fa-check"></i><b>6.1</b> Inputs</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="the-doxygen-docker-action-using-makefile-action.html"><a href="the-doxygen-docker-action-using-makefile-action.html#working-directory"><i class="fa fa-check"></i><b>6.1.1</b> ‘working-directory’</a></li>
<li class="chapter" data-level="6.1.2" data-path="the-doxygen-docker-action-using-makefile-action.html"><a href="the-doxygen-docker-action-using-makefile-action.html#color"><i class="fa fa-check"></i><b>6.1.2</b> ‘color’</a></li>
<li class="chapter" data-level="6.1.3" data-path="the-doxygen-docker-action-using-makefile-action.html"><a href="the-doxygen-docker-action-using-makefile-action.html#document-private"><i class="fa fa-check"></i><b>6.1.3</b> ‘document-private’</a></li>
<li class="chapter" data-level="6.1.4" data-path="the-doxygen-docker-action-using-makefile-action.html"><a href="the-doxygen-docker-action-using-makefile-action.html#generate-treeview"><i class="fa fa-check"></i><b>6.1.4</b> ‘generate-treeview’</a></li>
<li class="chapter" data-level="6.1.5" data-path="the-doxygen-docker-action-using-makefile-action.html"><a href="the-doxygen-docker-action-using-makefile-action.html#extra-settings"><i class="fa fa-check"></i><b>6.1.5</b> ‘extra-settings’</a></li>
<li class="chapter" data-level="6.1.6" data-path="the-doxygen-docker-action-using-makefile-action.html"><a href="the-doxygen-docker-action-using-makefile-action.html#makefile-target"><i class="fa fa-check"></i><b>6.1.6</b> ‘makefile-target’</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">BioCro Development</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="contributing-to-biocro" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">1</span> Contributing to BioCro<a href="contributing-to-biocro.html#contributing-to-biocro" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="making-changes" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Making Changes<a href="contributing-to-biocro.html#making-changes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="discuss-first" class="section level3 hasAnchor" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Discuss first<a href="contributing-to-biocro.html#discuss-first" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Check the list of <a href="https://github.com/ebimodeling/biocro/issues">GitHub issues</a> for a discussion of the issue. If there is not one, create an issue with a description of the problem and your proposed solution.</li>
</ul>
<p>By making changes without discussing it with the group, you risk spending time working on a solution that others may not accept. The members of the group also have diverse backgrounds and likely can give valuable design insights.</p>
</div>
</div>
<div id="code-style" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Code style<a href="contributing-to-biocro.html#code-style" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>(Most of what is discussed here pertains specifically to code for the BioCro C++ library.)</p>
<div id="scientific-considerations" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Scientific considerations<a href="contributing-to-biocro.html#scientific-considerations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="document-sources-and-justification-in-the-code" class="section level4 hasAnchor" number="1.2.1.1">
<h4><span class="header-section-number">1.2.1.1</span> Document sources and justification in the code<a href="contributing-to-biocro.html#document-sources-and-justification-in-the-code" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Include citations to sources for equations and parameters used in the code. The citation should be sufficient to locate the article and relevant information within it. Include a table or figure reference if appropriate.</li>
<li>Use <a href="https://www.doxygen.nl/manual/docblocks.html">Doxygen</a>-style comment syntax for high-level documentation of functions and classes. (See the documentation of the <code>solar_zenith_angle</code> class in the <a href="../src/module_library/solar_zenith_angle.h">Solar Zenith Angle module</a> for a short example of a Doxygen-style comment.)</li>
<li>Include reasoning and justification for the model, including assumptions that determine when use of the model is appropriate. These descriptions should be succinct.</li>
<li>See the <a href="../src/module_library/ball_berry.cpp">Ball-Berry model</a> for an example.</li>
</ul>
</div>
<div id="document-units-in-the-code" class="section level4 hasAnchor" number="1.2.1.2">
<h4><span class="header-section-number">1.2.1.2</span> Document units in the code<a href="contributing-to-biocro.html#document-units-in-the-code" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>After every <a href="https://en.wikipedia.org/wiki/Physical_quantity">physical quantity</a>, include a comment with the units. The idea is that every quantity will roughly be read as if it were written in normal text: <code>double yield = 10  // Mg / ha</code> is something like “the yield was 10 Mg / ha”. Using dimensions instead of units is acceptable if the code is written with the expectation that <a href="https://en.wikipedia.org/wiki/Coherence_%28units_of_measurement%29">coherent units</a> are used.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="contributing-to-biocro.html#cb2-1" aria-hidden="true"></a><span class="co">// In function signatures</span></span>
<span id="cb2-2"><a href="contributing-to-biocro.html#cb2-2" aria-hidden="true"></a><span class="dt">double</span> ball_berry(<span class="dt">double</span> assimilation,                   <span class="co">// mol / m^2 / s</span></span>
<span id="cb2-3"><a href="contributing-to-biocro.html#cb2-3" aria-hidden="true"></a>                  <span class="dt">double</span> atmospheric_co2_concentration,  <span class="co">// mol / mol</span></span>
<span id="cb2-4"><a href="contributing-to-biocro.html#cb2-4" aria-hidden="true"></a>                  <span class="dt">double</span> atmospheric_relative_humidity,  <span class="co">// Pa / Pa</span></span>
<span id="cb2-5"><a href="contributing-to-biocro.html#cb2-5" aria-hidden="true"></a>                  <span class="dt">double</span> beta0,                          <span class="co">// mol / m^2 / s</span></span>
<span id="cb2-6"><a href="contributing-to-biocro.html#cb2-6" aria-hidden="true"></a>                  <span class="dt">double</span> beta1)                          <span class="co">// dimensionless from [mol / m^2 / s] / [mol / m^2 / s]</span></span>
<span id="cb2-7"><a href="contributing-to-biocro.html#cb2-7" aria-hidden="true"></a></span>
<span id="cb2-8"><a href="contributing-to-biocro.html#cb2-8" aria-hidden="true"></a><span class="co">// In assignments</span></span>
<span id="cb2-9"><a href="contributing-to-biocro.html#cb2-9" aria-hidden="true"></a><span class="dt">double</span> leaf_temperature = air_temperature - <span class="dt">delta_t</span>;  <span class="co">// K.</span></span>
<span id="cb2-10"><a href="contributing-to-biocro.html#cb2-10" aria-hidden="true"></a></span>
<span id="cb2-11"><a href="contributing-to-biocro.html#cb2-11" aria-hidden="true"></a><span class="co">// In return statements</span></span>
<span id="cb2-12"><a href="contributing-to-biocro.html#cb2-12" aria-hidden="true"></a><span class="cf">return</span> assimilation_rate;  <span class="co">// micromoles / m^2 / s.</span></span>
<span id="cb2-13"><a href="contributing-to-biocro.html#cb2-13" aria-hidden="true"></a></span>
<span id="cb2-14"><a href="contributing-to-biocro.html#cb2-14" aria-hidden="true"></a><span class="co">// In tables</span></span>
<span id="cb2-15"><a href="contributing-to-biocro.html#cb2-15" aria-hidden="true"></a><span class="at">const</span> <span class="bu">std::</span>map&lt;SoilType, soilText_str&gt; soil_parameters =</span>
<span id="cb2-16"><a href="contributing-to-biocro.html#cb2-16" aria-hidden="true"></a>{</span>
<span id="cb2-17"><a href="contributing-to-biocro.html#cb2-17" aria-hidden="true"></a>    <span class="co">//                        d = dimensionless</span></span>
<span id="cb2-18"><a href="contributing-to-biocro.html#cb2-18" aria-hidden="true"></a>    <span class="co">//                        d     d     d     J kg^-1     d     J s m^-3     d     d      d     Mg m^-3</span></span>
<span id="cb2-19"><a href="contributing-to-biocro.html#cb2-19" aria-hidden="true"></a>    <span class="co">//                        silt  clay  sand  air_entry   b     Ks           satur fieldc wiltp bulk_density</span></span>
<span id="cb2-20"><a href="contributing-to-biocro.html#cb2-20" aria-hidden="true"></a>    { SoilType::sand,       { <span class="fl">0.05</span>, <span class="fl">0.03</span>, <span class="fl">0.92</span>,      -<span class="fl">0.7</span>,  <span class="fl">1.7</span>,  <span class="fl">5.8e-3</span>,      <span class="fl">0.87</span>, <span class="fl">0.09</span>,  <span class="fl">0.03</span>, <span class="fl">1.60</span> } },</span>
<span id="cb2-21"><a href="contributing-to-biocro.html#cb2-21" aria-hidden="true"></a>    { SoilType::loamy_sand, { <span class="fl">0.12</span>, <span class="fl">0.07</span>, <span class="fl">0.81</span>,      -<span class="fl">0.9</span>,  <span class="fl">2.1</span>,  <span class="fl">1.7e-3</span>,      <span class="fl">0.72</span>, <span class="fl">0.13</span>,  <span class="fl">0.06</span>, <span class="fl">1.55</span> } },</span>
<span id="cb2-22"><a href="contributing-to-biocro.html#cb2-22" aria-hidden="true"></a>};</span></code></pre></div></li>
<li><p>If you would like to include other details, include the units in the same way, and include details <strong>following</strong> the units so that the variables are still read like regular text. For example, write</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="contributing-to-biocro.html#cb3-1" aria-hidden="true"></a>✓ <span class="cf">return</span> gswmol * <span class="dv">1000</span>;  <span class="co">// mmol / m^2 / s. Convert from mol to mmol.</span></span></code></pre></div>
<p><em>not</em>
<code>c++   ✗ return gswmol * 1000;  // Converting from mol / m^2 / s to mmol / m^2 / s.</code></p></li>
<li><p>Use SI conventions for units and dimensions, including capitalization. Specifically, use “<code>degrees C</code>”, not “<code>C</code>”, to indicate °C.</p></li>
<li><p>Use full names when symbols are not available:</p>
<ul>
<li><code>micromoles / m^2</code>, <em>not</em> <code>umol / m^2</code></li>
<li><code>degrees C</code>, <em>not</em> <code>*C</code>.</li>
</ul></li>
<li><p>Use <code>dimensionless</code> for dimensionless quantities, and include how the dimensions have canceled if that is informative.</p></li>
<li><p>Use <code>^</code> to indicate exponentiation: <code>m^2</code>, <em>not</em> <code>m2</code>.</p></li>
<li><p>Prefer an asterisk to indicate multiplication; but indicating multiplication by juxtaposing units with exactly one space between them is acceptable. Prefer exactly one space on each side of the asterisk: <code>kg * m / s</code> or <code>kg m / s</code>.</p></li>
<li><p>Either a solidus (“/”) or negative exponent is acceptable to indicate division, but ensure that the solidus is used correctly if used multiple times. Prefer exactly one space on each side of the solidus.</p></li>
</ul>
</div>
<div id="document-parameters" class="section level4 hasAnchor" number="1.2.1.3">
<h4><span class="header-section-number">1.2.1.3</span> Document parameters<a href="contributing-to-biocro.html#document-parameters" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>When adding models that require new parameters, document the parameters in the parameter table in <a href="../src/parameters.h">src/parameters.h</a>. Please keep the table well formatted.</li>
<li>If you are working on a model with undocumented parameters, it would be nice if you added them to the table as you work through the issue.</li>
</ul>
</div>
</div>
<div id="general-coding-considerations" class="section level3 hasAnchor" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> General coding considerations<a href="contributing-to-biocro.html#general-coding-considerations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Do not use C-style arrays. Use an appropriate data type from the standard library instead.</p></li>
<li><p>Use cmath, not math.h, for common mathematical functions.</p></li>
<li><p>Be careful with <strong>using</strong>-directives (e.g. <code>using namespace std</code>) in
a global scope; do not use them in global scope in a header file.
Try to make <strong>using</strong>-declarations (e.g. <code>using std::string</code>) as
local as possible. Type aliases (e.g. <code>using string_vector =   std::vector&lt;std::string&gt;</code>) are perfectly acceptable in the global
scope of a header file.</p></li>
<li><p>Strongly prefer the
<a href="https://en.wikipedia.org/wiki/Coherence_%28units_of_measurement%29">coherent</a>
set of SI units. Doing so reduces code complexity remarkably as no
conversions are necessary. Yes, no one publishes values with these
units, but do the conversion in one place, the manuscript, instead
of dozens of times in the code, constantly having to look up units
for variables, and then spending hours debugging silly,
difficult-to-find errors. The coherent set of SI units consists of
all the units without prefixes, except that kg is the coherent unit
of mass, not g.</p></li>
<li><p>Do not copy and paste code, changing only small parts. Choose a design that eliminates the duplication. Duplication is often the result of not separating control flow from data. Consider the following R code.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="contributing-to-biocro.html#cb4-1" aria-hidden="true"></a><span class="cf">if</span> (<span class="op">!</span>(<span class="st">&quot;lattice&quot;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">installed.packages</span>()[,<span class="st">&quot;Package&quot;</span>])) {</span>
<span id="cb4-2"><a href="contributing-to-biocro.html#cb4-2" aria-hidden="true"></a>  <span class="kw">install.packages</span>(<span class="st">&quot;lattice&quot;</span>, <span class="dt">repos=</span><span class="st">&quot;http://R-Forge.R-project.org&quot;</span>, <span class="dt">type=</span><span class="st">&quot;source&quot;</span>)</span>
<span id="cb4-3"><a href="contributing-to-biocro.html#cb4-3" aria-hidden="true"></a>}</span>
<span id="cb4-4"><a href="contributing-to-biocro.html#cb4-4" aria-hidden="true"></a></span>
<span id="cb4-5"><a href="contributing-to-biocro.html#cb4-5" aria-hidden="true"></a><span class="cf">if</span> (<span class="op">!</span>(<span class="st">&quot;BioCro&quot;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">installed.packages</span>()[,<span class="st">&quot;Package&quot;</span>])) {</span>
<span id="cb4-6"><a href="contributing-to-biocro.html#cb4-6" aria-hidden="true"></a>  devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;ebimodeling/biocro&quot;</span>)</span>
<span id="cb4-7"><a href="contributing-to-biocro.html#cb4-7" aria-hidden="true"></a>}</span>
<span id="cb4-8"><a href="contributing-to-biocro.html#cb4-8" aria-hidden="true"></a></span>
<span id="cb4-9"><a href="contributing-to-biocro.html#cb4-9" aria-hidden="true"></a><span class="cf">if</span> (<span class="op">!</span>(<span class="st">&quot;boot&quot;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">installed.packages</span>()[,<span class="st">&quot;Package&quot;</span>])) {</span>
<span id="cb4-10"><a href="contributing-to-biocro.html#cb4-10" aria-hidden="true"></a>  devtools<span class="op">::</span><span class="kw">install_url</span>(<span class="st">&quot;http://cran.r-project.org/src/contrib/Archive/boot/boot_1.3-7.tar.gz&quot;</span>)</span>
<span id="cb4-11"><a href="contributing-to-biocro.html#cb4-11" aria-hidden="true"></a>}</span></code></pre></div>
<p>The data and behavior can be separated.
```r
required_packages = list(
# package name # installation function # function arguments
list(“lattice”, install.packages, list(“lattice”, repos=“<a href="http://R-Forge.R-project.org" class="uri">http://R-Forge.R-project.org</a>”, type=“source”)),
list(“BioCro”, devtools::install_github, list(“ebimodeling/biocro”)),
list(“boot”, devtools::install_url, list(“<a href="http://cran.r-project.org/src/contrib/Archive/boot/boot_1.3-7.tar.gz" class="uri">http://cran.r-project.org/src/contrib/Archive/boot/boot_1.3-7.tar.gz</a>”))
)</p>
<p>install_packages_if_missing = function(package_table) {
installed_packages = installed.packages()[,“Package”]
for (row in package_table) {
if (!(row[[1]] %in% installed_packages)) {
do.call(row[[2]], row[[3]])
}
}
}</p>
<p>install_packages_if_missing(required_packages)
```</p>
<p>In the first example, the behavior is spread throughout all of the code, and there is not an obvious indication of what is being done. Once one understands what is being done, one must still read all of the code to be sure some different behavior is not hidden somewhere.</p>
<p>In the second example, it is clear that the same task is performed repeatedly because control flow is in a single place, and the place has a meaningful name: <code>install_packages_if_missing</code>. For a long list, this is succinct, and easier to understand and maintain. If one wanted, one could devise a way to use the meaningful names of the columns of the <code>required_packages</code> table within the function.</p></li>
<li><p>Make an effort to write unit tests. (See the document “An Introduction to BioCro for Those Who Want to Add Models” for information about writing unit tests—specifically, writing unit tests for new modules.)</p></li>
<li><p>Do not mix sweeping formatting changes with behavior changes. Large formatting changes should be committed separately, and the commit comment should indicate that only formatting was changed.</p></li>
<li><p>The <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines">C++ guidelines</a> have useful advice about <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#S-naming">aspects of coding and design</a>.</p></li>
</ul>
</div>
<div id="formatting-code" class="section level3 hasAnchor" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Formatting code<a href="contributing-to-biocro.html#formatting-code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>(Again, except in a few instances, this pertains specifically to C++ code.)</p>
<p>The most important aspect of formatting is that the code is easy to understand. Below are unenforced preferences.</p>
<ul>
<li><p>Prefer <code>underscores_in_identifiers</code> not <code>CamelCaseInIdentifiers</code> and, in R, not <code>dots.in.identifiers</code>. Prefer lowercase-only identifiers. An exception may be made for commonly-recognized names used in a small scope, for example,
<code>c++     I = V / R;     F = m * a;     E = m * (c * c);</code></p></li>
<li><p>Avoid unnecessary parentheses. For example, use “<code>a * b / c</code>” instead of <nobr>“<code>(a * b) / c</code>”</nobr> or <nobr>“<code>a * (b / c)</code>”</nobr>. But in cases where the order of operations affects the result, parentheses may be used to erase any doubt in the mind of the reader (or the programmer!) as to what that order is. Thus, writing <code>(a / b) * c</code> instead of (the equivalent) <code>a / b * c</code> is acceptable. Parentheses may also be used to group portions of a formula that are commonly considered as a subunit, where they provide some semantic value (see the previous bullet point).
Consider naming parts of a complicated expression in order to break it down into simpler ones. For example,
<code>c++     x = (-b + sqrt(b * b - 4 * a * c)) / (2 * a);</code>
may be rewritten in three lines as
<code>c++     num = -b + sqrt(b * b - 4 * a * c);     denom = 2 * a;     x = num / denom;</code>
Note that in C++, unlike in R, return statements do not require parentheses around the returned expression.</p></li>
<li><p>Restrict the line length of paragraph-like comments to 80
characters, excepting a compelling reason to do otherwise. Lines in
sections that are not paragraph-like could be somewhat longer if it
facilitates presenting material in a more readable format. In the
following snippet from the module library documentation, for
example, we have allowed slighly-longer lines in order to be able to
maintain one line per interval:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a href="contributing-to-biocro.html#cb5-1" aria-hidden="true"></a><span class="co">/*</span></span>
<span id="cb5-2"><a href="contributing-to-biocro.html#cb5-2" aria-hidden="true"></a><span class="co">*  However, this definition is flexible. For example, for our soybean model</span></span>
<span id="cb5-3"><a href="contributing-to-biocro.html#cb5-3" aria-hidden="true"></a><span class="co">*  (soybean_development_rate_calculator.h) we define the intervals as follows:</span></span>
<span id="cb5-4"><a href="contributing-to-biocro.html#cb5-4" aria-hidden="true"></a><span class="co">*  -1 &lt;= DVI &lt; 0 : Sowing to Emergence</span></span>
<span id="cb5-5"><a href="contributing-to-biocro.html#cb5-5" aria-hidden="true"></a><span class="co">*   0 &lt;= DVI &lt; 1  :  Emergence to R1 (Flowering) is broken into three stages.</span></span>
<span id="cb5-6"><a href="contributing-to-biocro.html#cb5-6" aria-hidden="true"></a><span class="co">*       0 &lt;= DVI &lt; 0.333        : Emergence to V0 (Cotyledon stage)</span></span>
<span id="cb5-7"><a href="contributing-to-biocro.html#cb5-7" aria-hidden="true"></a><span class="co">*       0.333 &lt;= DVI &lt; 0.667    : V0 (Cotyledon stage) to R0 (End of Floral Induction)</span></span>
<span id="cb5-8"><a href="contributing-to-biocro.html#cb5-8" aria-hidden="true"></a><span class="co">*       0.667 &lt;= DVI &lt; 1        : R0 (End of Floral Induction) to R1 (Flowering)</span></span>
<span id="cb5-9"><a href="contributing-to-biocro.html#cb5-9" aria-hidden="true"></a><span class="co">*  1 &lt;= DVI &lt; 2 : R1 (Flowering) to R7 (Maturity)</span></span>
<span id="cb5-10"><a href="contributing-to-biocro.html#cb5-10" aria-hidden="true"></a><span class="co">*/</span></span></code></pre></div>
<p>As for the code lines themselves, we point to the following advice
from the Linux kernel project:<sup id="a1"><a href="contributing-to-biocro.html#f1">1</a></sup></p>
<blockquote>
<p>The preferred limit on the length of a single line is 80 columns.</p>
</blockquote>
<blockquote>
<p>Statements longer than 80 columns should be broken into sensible
chunks, unless exceeding 80 columns significantly increases
readability and does not hide information.</p>
</blockquote></li>
<li><p>Do not include trailing whitespace, i.e., whitespace characters preceding newline characters.</p></li>
<li><p>Each file should end with a newline character (i.e. a terminal endline).</p></li>
<li><p>Use spaces rather than tab characters.</p></li>
<li><p>In general, formatting preferences should follow something similar to the <a href="https://google.github.io/styleguide/cppguide.html#Formatting">Google C++ style guide</a>, except in cases where the code has been formatted in a more readable way, such as when aligning parts in a table.</p></li>
<li><p>The C++ guidelines offer some advice about <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#S-naming">formatting conventions</a> that are informative, particularly regarding the use of code comments, but that are not enforced here.</p></li>
</ul>
<p>For tools to help with formatting code, see the section
<a href="contributing-to-biocro.html#formatting-tools">1.3</a>.</p>
</div>
<div id="r-specific-coding-advice" class="section level3 hasAnchor" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> R-specific coding advice<a href="contributing-to-biocro.html#r-specific-coding-advice" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Prefer to use the double-bracket operator (<code>list[['element']]</code>) rather than
the dollar-sign operator (<code>list$element</code>) when accessing the elements of a
list. The <code>$</code> operator uses partial matching, whereas <code>[[</code>, by default, does
not. (However, it can be specified: <code>list[['element', exact = FALSE]]</code>.)
Avoiding partial matching by using <code>[[</code> gives us more confidence that errors
won’t occur.</p></li>
<li><p>While there is no inherent performance difference between a <code>for</code> loop and an
apply-type function such as <code>apply</code> or <code>lapply</code> (the apply functions actually
use <code>for</code> loops in their source code), it is nevertheless possible to write a
“bad” <code>for</code> loop that runs slowly. Common culprits include a failure to
pre-allocate memory or a poor choice in assignment method. If a <code>for</code> loop
seems to run slowly, consider replacing it with an apply-type function or
tweaking the assignment method (e.g. replacing <code>append</code> with <code>[</code>). Many guides
for optimizing loop performance are available online, such as <a href="https://datascienceplus.com/strategies-to-speedup-r-code/">Strategies to
Speedup R Code</a> and
<a href="https://privefl.github.io/blog/why-loops-are-slow-in-r/">Why loops are slow in R</a>.</p></li>
</ul>
<hr />
<p><b id="f1">1</b> The Linux kernel project recently changed the default
length for code lines from 80 to 100 characters with the following
commit comment:</p>
<blockquote>
<p>Yes, staying withing 80 columns is certainly still <em>preferred</em>. But
it’s not the hard limit that the checkpatch warnings imply, and other
concerns can most certainly dominate.</p>
</blockquote>
<blockquote>
<p>Increase the default limit to 100 characters. Not because 100
characters is some hard limit either, but that’s certainly a “what are
you doing” kind of value and less likely to be about the occasional
slightly longer lines. <a href="contributing-to-biocro.html#a1">↩︎</a></p>
</blockquote>

</div>
</div>
<div id="formatting-tools" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Formatting Tools<a href="contributing-to-biocro.html#formatting-tools" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="clang" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Clang<a href="contributing-to-biocro.html#clang" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Many of these BioCro formatting preferences can be applied automatically using the program <a href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a> with the <a href="../.clang-format">.clang-format</a> file provided in the base directory of BioCro. <strong>Do not apply clang-format to all files indiscriminately</strong>, as that will ruin manually-aligned tables.</p>
<div id="installation" class="section level4 hasAnchor" number="1.3.1.1">
<h4><span class="header-section-number">1.3.1.1</span> Installation<a href="contributing-to-biocro.html#installation" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>One can install clang-format on Ubunutu using <code>sudo apt install clang-format</code> and on MacOS through Homebrew.</p>
</div>
<div id="using-clang" class="section level4 hasAnchor" number="1.3.1.2">
<h4><span class="header-section-number">1.3.1.2</span> Using Clang<a href="contributing-to-biocro.html#using-clang" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Files can be formatted using</p>
<pre><code>clang-format file_name &gt; new_file</code></pre>
<p>or edited in place using</p>
<pre><code>clang-format -i file_name</code></pre>
<p>If your editor has the ability to display differences between the original and revised versions of the file, it is a good idea to step through and inspect the proposed changes to ensure they are desirable.</p>
</div>
<div id="clang-with-the-codelite-ide" class="section level4 hasAnchor" number="1.3.1.3">
<h4><span class="header-section-number">1.3.1.3</span> Clang with the CodeLite IDE<a href="contributing-to-biocro.html#clang-with-the-codelite-ide" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>On Windows, MacOS, or Linux, the CodeLite IDE includes clang-format
and provides an easy way to use it. First go to Plugins -&gt; Source Code
Formatter -&gt; Options. In the C++ tab, select <code>use .clang-format file</code>. Now press <code>Ctrl-I</code> or click Plugins -&gt; Source Code Formatter -&gt;
Format Current Source to format a file.</p>
</div>
</div>
<div id="editorconfig" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> EditorConfig<a href="contributing-to-biocro.html#editorconfig" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another tool to help with formatting is EditorConfig. EditorConfig,
when used in conjunction with the <a href="../.editorconfig">.editorconfig</a>
file provided in the base directory of BioCro, provides a method for
standardizing settings across different text editors. While some
editors have native support, others require a plugin. See the
<a href="https://editorconfig.org/">EditorConfig website</a> for more details.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="generating-documentation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
